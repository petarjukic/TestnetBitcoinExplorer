{"ast":null,"code":"'use strict';\n\n/**\n * Module dependencies.\n */\nconst Proxy = require('./proxy');\nconst uuid = require('uuid/v4');\n\n/**\n * Exports\n */\n\nmodule.exports = function logger(request, log) {\n  if (log === undefined) {\n    log = data => console.error(data);\n  }\n  if (typeof log !== 'function') {\n    throw new Error('Expected a function');\n  }\n  function apply(target, caller, args) {\n    const id = uuid();\n    const startTime = Date.now();\n    return target.apply(undefined, args).on('complete', function (response) {\n      if (!this.callback) {\n        return;\n      }\n      log({\n        body: response.body,\n        duration: Date.now() - startTime,\n        headers: response.headers,\n        id,\n        statusCode: response.statusCode,\n        type: 'response',\n        uri: this.uri.href\n      }, this);\n    }).on('error', function (error) {\n      log({\n        duration: Date.now() - startTime,\n        error,\n        headers: this.headers,\n        id,\n        method: this.method.toUpperCase(),\n        type: 'error',\n        uri: this.uri.href\n      }, this);\n    }).on('redirect', function () {\n      log({\n        duration: Date.now() - startTime,\n        headers: this.response.headers,\n        id,\n        statusCode: this.response.statusCode,\n        type: 'redirect',\n        uri: this.uri.href\n      }, this);\n    }).on('request', function () {\n      const data = {\n        headers: this.headers,\n        id,\n        method: this.method,\n        type: 'request',\n        uri: this.uri.href\n      };\n      if (this.body) {\n        data.body = this.body.toString('utf8');\n      }\n      log(data, this);\n    }).on('response', function (response) {\n      if (this.callback) {\n        return;\n      }\n      log({\n        duration: Date.now() - startTime,\n        headers: response.headers,\n        id,\n        statusCode: response.statusCode,\n        type: 'response',\n        uri: this.uri.href\n      }, this);\n    });\n  }\n  return new Proxy(request, {\n    apply,\n    get(target, name) {\n      if (['del', 'delete', 'get', 'head', 'patch', 'post', 'put'].indexOf(name) !== -1) {\n        return new Proxy(target[name], {\n          apply\n        });\n      }\n      return target[name];\n    }\n  });\n};","map":{"version":3,"names":["Proxy","require","uuid","module","exports","logger","request","log","undefined","data","console","error","Error","apply","target","caller","args","id","startTime","Date","now","on","response","callback","body","duration","headers","statusCode","type","uri","href","method","toUpperCase","toString","get","name","indexOf"],"sources":["/Users/petarjukic/Documents/Kriptovalute/Projekt/BlockExplorer/block_explorer/node_modules/@uphold/request-logger/src/index.js"],"sourcesContent":["'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst Proxy = require('./proxy');\nconst uuid = require('uuid/v4');\n\n/**\n * Exports\n */\n\nmodule.exports = function logger(request, log) {\n  if (log === undefined) {\n    log = data => console.error(data);\n  }\n\n  if (typeof log !== 'function') {\n    throw new Error('Expected a function');\n  }\n\n  function apply(target, caller, args) {\n    const id = uuid();\n    const startTime = Date.now();\n\n    return target.apply(undefined, args)\n      .on('complete', function(response) {\n        if (!this.callback) {\n          return;\n        }\n\n        log({\n          body: response.body,\n          duration: Date.now() - startTime,\n          headers: response.headers,\n          id,\n          statusCode: response.statusCode,\n          type: 'response',\n          uri: this.uri.href\n        }, this);\n      }).on('error', function(error) {\n        log({\n          duration: Date.now() - startTime,\n          error,\n          headers: this.headers,\n          id,\n          method: this.method.toUpperCase(),\n          type: 'error',\n          uri: this.uri.href\n        }, this);\n      }).on('redirect', function() {\n        log({\n          duration: Date.now() - startTime,\n          headers: this.response.headers,\n          id,\n          statusCode: this.response.statusCode,\n          type: 'redirect',\n          uri: this.uri.href\n        }, this);\n      }).on('request', function() {\n        const data = {\n          headers: this.headers,\n          id,\n          method: this.method,\n          type: 'request',\n          uri: this.uri.href\n        };\n\n        if (this.body) {\n          data.body = this.body.toString('utf8');\n        }\n\n        log(data, this);\n      }).on('response', function(response) {\n        if (this.callback) {\n          return;\n        }\n\n        log({\n          duration: Date.now() - startTime,\n          headers: response.headers,\n          id,\n          statusCode: response.statusCode,\n          type: 'response',\n          uri: this.uri.href\n        }, this);\n      });\n  }\n\n  return new Proxy(request, {\n    apply,\n    get(target, name) {\n      if (['del', 'delete', 'get', 'head', 'patch', 'post', 'put'].indexOf(name) !== -1) {\n        return new Proxy(target[name], { apply });\n      }\n\n      return target[name];\n    }\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}