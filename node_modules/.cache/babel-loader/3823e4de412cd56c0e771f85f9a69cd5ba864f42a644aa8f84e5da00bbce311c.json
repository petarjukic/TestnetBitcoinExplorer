{"ast":null,"code":"var fs = require('fs');\nvar ncp = require('ncp').ncp;\nvar path = require('path');\nvar rimraf = require('rimraf');\nvar mkdirp = require('mkdirp');\nmodule.exports = mv;\nfunction mv(source, dest, options, cb) {\n  if (typeof options === 'function') {\n    cb = options;\n    options = {};\n  }\n  var shouldMkdirp = !!options.mkdirp;\n  var clobber = options.clobber !== false;\n  var limit = options.limit || 16;\n  if (shouldMkdirp) {\n    mkdirs();\n  } else {\n    doRename();\n  }\n  function mkdirs() {\n    mkdirp(path.dirname(dest), function (err) {\n      if (err) return cb(err);\n      doRename();\n    });\n  }\n  function doRename() {\n    if (clobber) {\n      fs.rename(source, dest, function (err) {\n        if (!err) return cb();\n        if (err.code !== 'EXDEV') return cb(err);\n        moveFileAcrossDevice(source, dest, clobber, limit, cb);\n      });\n    } else {\n      fs.link(source, dest, function (err) {\n        if (err) {\n          if (err.code === 'EXDEV') {\n            moveFileAcrossDevice(source, dest, clobber, limit, cb);\n            return;\n          }\n          if (err.code === 'EISDIR' || err.code === 'EPERM') {\n            moveDirAcrossDevice(source, dest, clobber, limit, cb);\n            return;\n          }\n          cb(err);\n          return;\n        }\n        fs.unlink(source, cb);\n      });\n    }\n  }\n}\nfunction moveFileAcrossDevice(source, dest, clobber, limit, cb) {\n  var outFlags = clobber ? 'w' : 'wx';\n  var ins = fs.createReadStream(source);\n  var outs = fs.createWriteStream(dest, {\n    flags: outFlags\n  });\n  ins.on('error', function (err) {\n    ins.destroy();\n    outs.destroy();\n    outs.removeListener('close', onClose);\n    if (err.code === 'EISDIR' || err.code === 'EPERM') {\n      moveDirAcrossDevice(source, dest, clobber, limit, cb);\n    } else {\n      cb(err);\n    }\n  });\n  outs.on('error', function (err) {\n    ins.destroy();\n    outs.destroy();\n    outs.removeListener('close', onClose);\n    cb(err);\n  });\n  outs.once('close', onClose);\n  ins.pipe(outs);\n  function onClose() {\n    fs.unlink(source, cb);\n  }\n}\nfunction moveDirAcrossDevice(source, dest, clobber, limit, cb) {\n  var options = {\n    stopOnErr: true,\n    clobber: false,\n    limit: limit\n  };\n  if (clobber) {\n    rimraf(dest, {\n      disableGlob: true\n    }, function (err) {\n      if (err) return cb(err);\n      startNcp();\n    });\n  } else {\n    startNcp();\n  }\n  function startNcp() {\n    ncp(source, dest, options, function (errList) {\n      if (errList) return cb(errList[0]);\n      rimraf(source, {\n        disableGlob: true\n      }, cb);\n    });\n  }\n}","map":{"version":3,"names":["fs","require","ncp","path","rimraf","mkdirp","module","exports","mv","source","dest","options","cb","shouldMkdirp","clobber","limit","mkdirs","doRename","dirname","err","rename","code","moveFileAcrossDevice","link","moveDirAcrossDevice","unlink","outFlags","ins","createReadStream","outs","createWriteStream","flags","on","destroy","removeListener","onClose","once","pipe","stopOnErr","disableGlob","startNcp","errList"],"sources":["/Users/petarjukic/Documents/Kriptovalute/Projekt/BlockExplorer/block_explorer/node_modules/mv/index.js"],"sourcesContent":["var fs = require('fs');\nvar ncp = require('ncp').ncp;\nvar path = require('path');\nvar rimraf = require('rimraf');\nvar mkdirp = require('mkdirp');\n\nmodule.exports = mv;\n\nfunction mv(source, dest, options, cb){\n  if (typeof options === 'function') {\n    cb = options;\n    options = {};\n  }\n  var shouldMkdirp = !!options.mkdirp;\n  var clobber = options.clobber !== false;\n  var limit = options.limit || 16;\n\n  if (shouldMkdirp) {\n    mkdirs();\n  } else {\n    doRename();\n  }\n\n  function mkdirs() {\n    mkdirp(path.dirname(dest), function(err) {\n      if (err) return cb(err);\n      doRename();\n    });\n  }\n\n  function doRename() {\n    if (clobber) {\n      fs.rename(source, dest, function(err) {\n        if (!err) return cb();\n        if (err.code !== 'EXDEV') return cb(err);\n        moveFileAcrossDevice(source, dest, clobber, limit, cb);\n      });\n    } else {\n      fs.link(source, dest, function(err) {\n        if (err) {\n          if (err.code === 'EXDEV') {\n            moveFileAcrossDevice(source, dest, clobber, limit, cb);\n            return;\n          }\n          if (err.code === 'EISDIR' || err.code === 'EPERM') {\n            moveDirAcrossDevice(source, dest, clobber, limit, cb);\n            return;\n          }\n          cb(err);\n          return;\n        }\n        fs.unlink(source, cb);\n      });\n    }\n  }\n}\n\nfunction moveFileAcrossDevice(source, dest, clobber, limit, cb) {\n  var outFlags = clobber ? 'w' : 'wx';\n  var ins = fs.createReadStream(source);\n  var outs = fs.createWriteStream(dest, {flags: outFlags});\n  ins.on('error', function(err){\n    ins.destroy();\n    outs.destroy();\n    outs.removeListener('close', onClose);\n    if (err.code === 'EISDIR' || err.code === 'EPERM') {\n      moveDirAcrossDevice(source, dest, clobber, limit, cb);\n    } else {\n      cb(err);\n    }\n  });\n  outs.on('error', function(err){\n    ins.destroy();\n    outs.destroy();\n    outs.removeListener('close', onClose);\n    cb(err);\n  });\n  outs.once('close', onClose);\n  ins.pipe(outs);\n  function onClose(){\n    fs.unlink(source, cb);\n  }\n}\n\nfunction moveDirAcrossDevice(source, dest, clobber, limit, cb) {\n  var options = {\n    stopOnErr: true,\n    clobber: false,\n    limit: limit,\n  };\n  if (clobber) {\n    rimraf(dest, { disableGlob: true }, function(err) {\n      if (err) return cb(err);\n      startNcp();\n    });\n  } else {\n    startNcp();\n  }\n  function startNcp() {\n    ncp(source, dest, options, function(errList) {\n      if (errList) return cb(errList[0]);\n      rimraf(source, { disableGlob: true }, cb);\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}